<ng-include ng-if="user.signedIn" src="'main/menu.html'"></ng-include>

<loading></loading>

<div flash-message="7500" ng-if="user.signedIn"></div>

<!-- Main View Container -->
<main flex-gt-sm="70" flex-offset-gt-sm="15" class="view-animate-container" ng-if="user.signedIn">        
    <!-- ng-view inserts angular views determined by routing -->
    <div ng-view class="view-animate view-frame"></div>
</main>

<md-sidenav user-menu class="md-sidenav-right" md-component-id="user-menu">
    <md-content ng-form="contactForm" contact layout="column" layout-fill layout-padding>
        <md-input-container class="md-no-margin-bot">
            <label>Send us a message</label>
            <textarea ng-model="cv.message"></textarea>
        </md-input-container>
        <md-input-container class="md-no-margin-top" ng-if="!user.signedIn">
            <label>Email</label>
            <input name="email" type="email" ng-model="user.email" ng-pattern="/^.+@.+\..+$/">
        </md-input-container>
        <md-button ng-click="cv.newContact(user.email, cv.message);uv.closeMenu()" ng-disabled="!cv.message || !cv.email || !contactForm['email'].$valid" aria-label="send a message to clerkr">
            Submit
        </md-button>
        <span flex></span>
        <md-button ng-click="uv.closeMenu();signOut()" ng-if="user.signedIn" class="md-raised md-warn" aria-label="sign out of clerkr">
            Sign Out
        </md-button>
        <md-button ng-click="authenticate('github')" class="md-raised" aria-label="sign in with github" ng-if="!user.signedIn">
            Sign in with Github
        </md-button>
        <md-button ng-click="authenticate('google')" class="md-raised md-primary" aria-label="sign in with google" ng-if="!user.signedIn">
            Sign in with Google
        </md-button>
        <md-button ng-click="authenticate('facebook')" class="md-raised md-accent" aria-label="sign in with facebook" ng-if="!user.signedIn">
            Sign in with Facebook
        </md-button>
    </md-content>
</md-sidenav>