<ng-include ng-if="user.signedIn" src="'main/menu.html'"></ng-include>

<loading></loading>

<!-- Main View Container -->
<main class="view-animate-container" ng-if="user.signedIn">
    <div flex-gt-sm="70" flex-offset-gt-sm="15">
        <div flash-message="7500"></div>
        
        <!-- ng-view inserts angular views determined by routing -->
        <section ng-view class="view-animate view-frame"></section>

    </div>
</main>

<md-sidenav user-menu class="md-sidenav-right" md-component-id="user-menu">
    <md-content ng-form="contactForm" contact layout="column" layout-fill layout-padding>
        <div layout="column" layout-align="center center" ng-if="!user.signedIn">
            <md-button ng-click="authenticate('github')" class="md-raised" aria-label="sign in with github">
                Sign in with Github
            </md-button>
            <md-button ng-click="authenticate('google')" class="md-raised md-primary" aria-label="sign in with google">
                Sign in with Google
            </md-button>
            <md-button ng-click="authenticate('facebook')" class="md-raised md-accent" aria-label="sign in with facebook">
                Sign in with Facebook
            </md-button>
        </div>
        <md-divider></md-divider>
        <md-input-container class="md-no-errors md-no-margin-bot">
            <label>Send us a message</label>
            <textarea ng-model="cv.message" required="required"></textarea>
        </md-input-container>
        <md-input-container ng-if="!user.signedIn">
            <label>Email</label>
            <input type="email" ng-model="user.email" required="required">
        </md-input-container>
        <md-button ng-click="cv.newContact(user.email, cv.message);uv.closeMenu()" ng-disabled="!contactForm.$valid" aria-label="send contact message">
            Submit
        </md-button>
        <span flex></span>
        <md-button ng-click="uv.closeMenu();signOut()" ng-if="user.signedIn" class="md-raised md-warn" aria-label="sign out of clerkr">
            Sign Out
        </md-button>
    </md-content>
</md-sidenav>