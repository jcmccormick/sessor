<div ng-form="vr.myForm" class="form">
	<div class="form-header col-xs-12">
		<ul class="nav top-nav">
			<li class="dropdown">
				<a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown">Reports <b class="caret"></b></a>
				<ul class="dropdown-menu" role="menu">
					<li ng-if="vr.report.id"><a href="javascript:;" ng-click="vr.report.saveReport(false, vr.myForm, vr.report)"><i class="glyphicon glyphicon-save"></i> &nbsp; View</a></li>
					<li><a href="#/reports/new"><i class="glyphicon glyphicon-plus"></i> &nbsp; New</a></li>
					<li><a href="#/reports"><i class="glyphicon glyphicon-search"></i> &nbsp; View All</a></li>
					<li ng-if="vr.report.id" class="divider"></li>
					<li ng-if="vr.report.id"><a href="javascript:;" ng-bootbox-confirm="<center><h4>Are you sure you want to delete this report?<br> All work will be permanently deleted.</h4></center>" ng-bootbox-confirm-action="vr.report.deleteReport(vr.report)"><i class="glyphicon glyphicon-trash text-danger"></i> &nbsp; Delete</a></li>
				</ul>
			</li>
			<li><a href="javascript:;" ng-click="vr.report.saveReport(true, vr.myForm, vr.report)"><span ng-class="{'save-now':vr.myForm.$dirty}">Save</span></a></li>
		</ul>

		<div ng-if="!vr.report.id || vr.report.editing">
			<div class="col-xs-12" ng-if="!vr.report.add_templates.length && !vr.report.templates">
				<p>It looks like you don't have any pages yet. Make sure the Page you want to add is not marked as Draft. Uncheck "Draft" under the Options menu when editing a Page, then save it.</p>
				<p>Pages may only be added to a report once.</p>
			</div>
			<div class="col-xs-6 col-md-3">
				<label for="report-name">Report Name</label>
				<input type="text" id="report-name" class="form-control" placeholder="Optional" ng-model="vr.report.title" ng-keypress="($event.keyCode==13) && vr.report.saveReport(true, vr.myForm, vr.report)" />
			</div>
			<div class="col-xs-6 col-md-3" ng-if="vr.report.add_templates.length">
				<label for="add-pages">Add Page</label>
				<div class="input-group">
					<select id="add-pages" class="form-control" ng-options="template.name for template in vr.report.add_templates" ng-model="vr.template"></select>
					<span class="input-group-btn">
						<a href="javascript:;" class="btn btn-primary" ng-click="vr.report.addTemplate(vr.template, vr.myForm, vr.report);vr.report.newPageAdd=false">Add</a>
					</span>
				</div>
			</div>
			<div class="col-xs-6 col-md-3">
				<label for="current-page">Current Page</label>
				<select id="current-page" class="form-control" ng-options="template.name for template in vr.report.templates" ng-model="vr.report.form"></select>
			</div>
			<div class="col-xs-6 col-md-3">
				<label class="col-xs-12">&nbsp;</label>
				<a href="javascript:;" class="btn" ng-bootbox-confirm="<center><h4>Are you sure you want to remove this page from the report?<br><br>All information will be lost.</h4></center>" ng-bootbox-confirm-action="vr.report.removeTemplate(vr.report.form, vr.report)">Remove this page</a>
			</div>
		</div>
	</div>

	<template-form-directive report="vr.report" form="vr.report.form"></template-form-directive>

</div>


<!-- REPORT PAGES MOBILE BOTTOM BAR BREADCRUMBS -->
<!-- <ol ng-init="vr.report.showPages=false;vr.report.form = vr.report.templates[0]" ng-click="vr.report.showPages=!vr.report.showPages" ng-if="vr.report.templates.length" class="breadcrumb edit-report-crumbs">
	<h3>Pages</h3>
	<li ng-show="vr.report.showPages" ng-class="{'in':vr.report.showPages,'selected':template==vr.report.form}" ng-repeat="template in vr.report.templates"><a href="javascript:;" ng-click="vr.report.form = template">{{template.name}}</a></li>
</ol>
 -->