<div ng-form="vr.repForm">
	<div class="form-header">
		<section>
			<ul class="nav top-nav">
				<li class="dropdown">
					<a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown">Reports <b class="caret"></b></a>
					<ul class="dropdown-menu" role="menu">
						<li ng-if="vr.report.id"><a href="javascript:;" ng-click="vr.save()"><i class="glyphicon glyphicon-save"></i> &nbsp; View</a></li>
						<li><a href="#/reports/new"><i class="glyphicon glyphicon-plus"></i> &nbsp; New</a></li>
						<li><a href="#/reports"><i class="glyphicon glyphicon-search"></i> &nbsp; View All</a></li>
						<li ng-if="vr.report.id" class="divider"></li>
						<li ng-if="vr.report.id"><a href="javascript:;" ng-bootbox-confirm="<center><h4>Are you sure you want to delete this report?<br> All work will be permanently deleted.</h4></center>" ng-bootbox-confirm-action="vr.report.deleteReport(vr.repForm)"><i class="glyphicon glyphicon-trash text-danger"></i> &nbsp; Delete</a></li>
					</ul>
				</li>
				<li ng-if="vr.report.id"><a href="javascript:;" ng-click="vr.save(true)"><span ng-class="{'save-now':!vr.repForm.$pristine}">Save</span></a></li>
				<li class="form-specs-toggle pull-right" ng-if="!vr.report.id || vr.report.e" data-toggle="collapse" data-target=".form-specs" aria-expanded="true">
					<a href="javascript:;"><i class="glyphicon glyphicon-cog pull-right"></i></a>
				</li>
			</ul>

			<div class="form-specs collapse" ng-class="{'in':!vr.report.id || vr.report.e}">
				<div class="container-fluid" ng-show="!vr.report.id || vr.report.e">
					<div class="col-xs-12" ng-if="!vr.templates.length">
						<p>It looks like you don't have any pages yet. Make sure the Page you want to add is not marked as Draft. Uncheck "Draft" under the Options menu when editing a Page, then save it.</p>
						<p>Pages may only be added to a report once.</p>
					</div>
					<div class="col-xs-6 col-md-3">
						<label for="report-name">Report Name</label>
						<input type="text" id="report-name" class="form-control" placeholder="Optional" ng-model="vr.report.title" ng-keypress="($event.keyCode==13) && vr.report.save(true)" />
					</div>
					<div class="col-xs-6 col-md-3" ng-if="vr.templates.length">
						<label for="add-pages">Add Page</label>
						<div class="input-group">
							<select id="add-pages" class="form-control" ng-options="template.name for template in vr.filteredTemplates()" ng-model="vr.template"></select>
							<span class="input-group-btn">
								<a href="javascript:;" class="btn btn-default" ng-click="vr.report.addTemplate(vr.template, vr.repForm)">Add</a>
							</span>
						</div>
					</div>
					<div class="col-xs-6 col-md-3" ng-if="vr.report.templates.length">
						<a href="javascript:;" ng-class="{'disabled':vr.report.form.id == vr.report.template_order[0]}" ng-click="vr.switchForm(-1)"><i class="glyphicon glyphicon-triangle-left"></i></a>
						<label for="current-page">Current Page</label>
						<a href="javascript:;" ng-class="{'disabled':vr.report.form.id == vr.report.template_order[vr.report.template_order.length-1]}" ng-click="vr.switchForm(1)"><i class="glyphicon glyphicon-triangle-right"></i></a>
						<div class="input-group">
							<select id="current-page" class="form-control" ng-model="vr.report.form" ng-options="template.name for template in vr.report.templates"></select>
							<span class="input-group-btn">
								<a href="javascript:;" class="btn btn-default" ng-bootbox-confirm="<center><h4>Are you sure you want to remove this page from the report?<br><br>All information will be lost.</h4></center>" ng-bootbox-confirm-action="vr.report.removeTemplate(vr.report.form)">
									<i class="glyphicon glyphicon-trash"></i>
								</a>
							</span>
						</div>
					</div>
				</div>
			</div>
		</section>
	</div>

	<template-form-directive report="vr.report" form="vr.report.form"></template-form-directive>

</div>


<!-- REPORT PAGES MOBILE BOTTOM BAR BREADCRUMBS -->
<!-- <ol ng-init="vr.report.showPages=false;vr.report.form = vr.report.templates[0]" ng-click="vr.report.showPages=!vr.report.showPages" ng-if="vr.report.templates.length" class="breadcrumb edit-report-crumbs">
	<h3>Pages</h3>
	<li ng-show="vr.report.showPages" ng-class="{'in':vr.report.showPages,'selected':template==vr.report.form}" ng-repeat="template in vr.report.templates"><a href="javascript:;" ng-click="vr.report.form = template">{{template.name}}</a></li>
</ol>
 -->