<md-card>
    <md-toolbar class="md-site-secondary">
        <div class="md-toolbar-tools">
            <h2>
                <span>Statistics</span>
            </h2>
        </div>
    </md-toolbar>

    <div layout="row" layout-align="center center" layout-padding>
        <strong>Page</strong>
        <md-select ng-model="sv.template" ng-change="sv.checker()">
            <md-option ng-repeat="template in sv.orderedTemplates = (sv.templates | orderBy:'-updated_at')" ng-value="template">{{template.name}}</md-option>
        </md-select>
    
        <strong>Field</strong>
        <md-select ng-model="sv.field">
            <md-option ng-repeat="field in sv.filteredFields = ( sv.template.fields | filter: {fieldtype: '!labelntext'} )" ng-value="field">{{field.o.name}}</md-option>
        </md-select>
    
        <strong>Past # of Days</strong>
        <md-select ng-model="sv.days">
            <md-option ng-repeat="day in [5, 10, 15, 30, 60, 90]" value="{{day}}">{{day}}</md-option>
        </md-select>
    </div>

    <div layout="row" layout-align="center center" layout-padding>
        <md-button ng-click="sv.update()" aria-label="update graph with selected options">
            Update
        </md-button>

        <md-button ng-click="sv.chart.data = {};sv.chartEditor.closeDialog()" aria-label="clear graph display">
            Clear
        </md-button>
    </div>

    <div layout-padding ng-if="sv.chart.data.rows.length && sv.chart.data.cols.length">
        <span ng-if="!sv.chart.displayed">Initializing chart...</span>

        <md-button ng-click="sv.loadEditor()" ng-if="sv.chart.displayed" class="md-raised|md-fab|md-mini" aria-label="edit graph options">
            Edit
        </md-button>

        <div id="google-chart"></div>
    </div>
</md-card>